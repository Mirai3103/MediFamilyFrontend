import{u as h,r as u,j as e,L as n}from"./index-BW1v2Y3o.js";import{U as x}from"./UnAuthLayout-BsdPC7E-.js";import{u as p,s as j}from"./label-C5VtnZRZ.js";import{z as l}from"./index-B3p3PcZP.js";import{B as o}from"./index-lZj-UG3P.js";import{C as f,a as g,b,c as y,d as i,e as m}from"./card-Bb8dNGOw.js";import{I as C}from"./input-B9pFp4AM.js";import{F as N,a as F,b as k,c as w,d as S,e as E}from"./form-CBmUezT4.js";import{d as v}from"./auth-controller-BpkYrUt_.js";import"./index-Bvgfl4DN.js";import"./clsx-B-dksMZM.js";const L=l.object({email:l.string().email({message:"Email không hợp lệ"})});function V(){h();const[t,r]=u.useState(!1),a=p({resolver:j(L),defaultValues:{email:""},mode:"onChange"}),c=v({mutation:{onSuccess:()=>{r(!0)},onError:s=>{console.error("Error sending reset password email:",s),a.setError("email",{type:"manual",message:"Có lỗi xảy ra. Vui lòng thử lại sau."})}}}),d=s=>{c.mutate({data:s.email}),r(!0)};return e.jsx("div",{className:"flex items-center justify-center min-h-[80vh] bg-background p-4",children:e.jsxs(f,{className:"w-full max-w-md shadow-lg",children:[e.jsxs(g,{className:"space-y-1",children:[e.jsx(b,{className:"text-2xl font-bold text-center",children:"Quên mật khẩu"}),e.jsx(y,{className:"text-center",children:t?"Vui lòng kiểm tra email của bạn":"Nhập email của bạn để nhận hướng dẫn đặt lại mật khẩu"})]}),t?e.jsxs(e.Fragment,{children:[e.jsxs(i,{className:"space-y-4 text-center ",children:[e.jsx("p",{children:"Chúng tôi đã gửi email hướng dẫn đặt lại mật khẩu đến địa chỉ email của bạn."}),e.jsx("p",{children:"Vui lòng kiểm tra hộp thư đến và làm theo hướng dẫn để đặt lại mật khẩu."})]}),e.jsx(m,{className:"flex flex-col space-y-4",children:e.jsx(o,{asChild:!0,className:"w-full",children:e.jsx(n,{to:"/login",children:"Quay lại đăng nhập"})})})]}):e.jsx(N,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(d),children:[e.jsx(i,{className:"space-y-4",children:e.jsx(F,{control:a.control,name:"email",render:({field:s})=>e.jsxs(k,{children:[e.jsx(w,{children:"Email"}),e.jsx(S,{children:e.jsx(C,{placeholder:"example@email.com",type:"email",...s})}),e.jsx(E,{})]})})}),e.jsxs(m,{className:"flex flex-col space-y-4 pt-3",children:[e.jsx(o,{type:"submit",className:"w-full",children:"Gửi yêu cầu"}),e.jsx("div",{className:"text-center text-sm",children:e.jsx(n,{to:"/login",className:"text-primary hover:underline",children:"Quay lại đăng nhập"})})]})]})})]})})}const M=function(){return e.jsx(x,{children:e.jsx(V,{})})};export{M as component};
