import{I as w,r as i,j as d}from"./index-BW1v2Y3o.js";import{c as R,b as f}from"./index-BvPlwEJa.js";import{a as j}from"./index-BYx5ngvf.js";import{P as v,c as m}from"./index-lZj-UG3P.js";import{g as C}from"./file-D5Y2yJfI.js";var y=w();function N(){return y.useSyncExternalStore(_,()=>!0,()=>!1)}function _(){return()=>{}}var g="Avatar",[k,G]=R(g),[F,S]=k(g),x=i.forwardRef((a,e)=>{const{__scopeAvatar:n,...r}=a,[s,t]=i.useState("idle");return d.jsx(F,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:t,children:d.jsx(v.span,{...r,ref:e})})});x.displayName=g;var L="AvatarImage",E=i.forwardRef((a,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...t}=a,l=S(L,n),o=M(r,t),u=j(c=>{s(c),l.onImageLoadingStatusChange(c)});return f(()=>{o!=="idle"&&u(o)},[o,u]),o==="loaded"?d.jsx(v.img,{...t,ref:e,src:r}):null});E.displayName=L;var I="AvatarFallback",h=i.forwardRef((a,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=a,t=S(I,n),[l,o]=i.useState(r===void 0);return i.useEffect(()=>{if(r!==void 0){const u=window.setTimeout(()=>o(!0),r);return()=>window.clearTimeout(u)}},[r]),l&&t.imageLoadingStatus!=="loaded"?d.jsx(v.span,{...s,ref:e}):null});h.displayName=I;function A(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function M(a,{referrerPolicy:e,crossOrigin:n}){const r=N(),s=i.useRef(null),t=r?(s.current||(s.current=new window.Image),s.current):null,[l,o]=i.useState(()=>A(t,a));return f(()=>{o(A(t,a))},[t,a]),f(()=>{const u=b=>()=>{o(b)};if(!t)return;const c=u("loaded"),p=u("error");return t.addEventListener("load",c),t.addEventListener("error",p),e&&(t.referrerPolicy=e),typeof n=="string"&&(t.crossOrigin=n),()=>{t.removeEventListener("load",c),t.removeEventListener("error",p)}},[t,n,e]),l}var P=x,z=E,T=h;function K({className:a,...e}){return d.jsx(P,{"data-slot":"avatar",className:m("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...e})}function U({className:a,src:e,...n}){const r=C(e);return d.jsx(z,{"data-slot":"avatar-image",className:m("aspect-square size-full",a),src:r,...n})}function W({className:a,...e}){return d.jsx(T,{"data-slot":"avatar-fallback",className:m("bg-muted flex size-full items-center justify-center rounded-full",a),...e})}export{K as A,U as a,W as b,x as c,E as d,h as e};
