import{j as e,r as T,t as f,o as _,P as $,Q as E}from"./index-BW1v2Y3o.js";import{C as w,a as B,b as M,c as F,d as S}from"./card-Bb8dNGOw.js";import{B as b}from"./index-lZj-UG3P.js";import{u as I,s as P}from"./label-C5VtnZRZ.js";import{z as l}from"./index-B3p3PcZP.js";import{F as A,a as h,b as o,c as d,d as m,e as x}from"./form-CBmUezT4.js";import{I as g}from"./input-B9pFp4AM.js";import{T as y}from"./textarea-DMIEle1g.js";import{U as L,F as D}from"./user-BXjafA9g.js";import{M as K}from"./mail-8B1aJbxS.js";import{c as N}from"./createLucideIcon-BIXz2lW7.js";import{C as O}from"./calendar-DSwk2Pit.js";import{P as q}from"./pencil-CU8hVN-1.js";import{H as G}from"./heart-BoFhaPJl.js";/**
 * @license lucide-react v0.481.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],k=N("Activity",Q);/**
 * @license lucide-react v0.481.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]],U=N("HeartPulse",Y);/**
 * @license lucide-react v0.481.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],R=N("MapPin",V);/**
 * @license lucide-react v0.481.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],J=N("Phone",Z);/**
 * @license lucide-react v0.481.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]],X=N("Ruler",W);/**
 * @license lucide-react v0.481.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],se=N("TriangleAlert",ee),ne=l.object({fullName:l.string().min(2,{message:"Họ tên phải có ít nhất 2 ký tự"}),email:l.string().email({message:"Email không hợp lệ"}),phone:l.string().min(10,{message:"Số điện thoại không hợp lệ"}),dateOfBirth:l.string().optional(),address:l.string().optional(),bio:l.string().optional()}),te=({profile:s,onSubmitSuccess:i,onCancel:r})=>{const c={email:s.email||"",fullName:s.fullName||"",phone:s.phoneNumber||"",address:s.address,bio:s.bio||"",dateOfBirth:s.dateOfBirth},a=I({resolver:P(ne),defaultValues:c}),u=t=>{console.log("Updated profile data:",t),i()};return e.jsx(A,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(u),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{control:a.control,name:"fullName",render:({field:t})=>e.jsxs(o,{children:[e.jsx(d,{children:"Họ và tên"}),e.jsx(m,{children:e.jsx(g,{placeholder:"Họ và tên",...t})}),e.jsx(x,{})]})}),e.jsx(h,{control:a.control,name:"email",render:({field:t})=>e.jsxs(o,{children:[e.jsx(d,{children:"Email"}),e.jsx(m,{children:e.jsx(g,{placeholder:"Email",...t})}),e.jsx(x,{})]})}),e.jsx(h,{control:a.control,name:"phone",render:({field:t})=>e.jsxs(o,{children:[e.jsx(d,{children:"Số điện thoại"}),e.jsx(m,{children:e.jsx(g,{placeholder:"Số điện thoại",...t})}),e.jsx(x,{})]})}),e.jsx(h,{control:a.control,name:"dateOfBirth",render:({field:t})=>e.jsxs(o,{children:[e.jsx(d,{children:"Ngày sinh"}),e.jsx(m,{children:e.jsx(g,{type:"date",...t})}),e.jsx(x,{})]})}),e.jsx(h,{control:a.control,name:"address",render:({field:t})=>e.jsxs(o,{className:"md:col-span-2",children:[e.jsx(d,{children:"Địa chỉ"}),e.jsx(m,{children:e.jsx(g,{placeholder:"Địa chỉ",...t})}),e.jsx(x,{})]})}),e.jsx(h,{control:a.control,name:"bio",render:({field:t})=>e.jsxs(o,{className:"md:col-span-2",children:[e.jsx(d,{children:"Giới thiệu"}),e.jsx(m,{children:e.jsx(y,{placeholder:"Giới thiệu về bản thân",className:"resize-none",...t})}),e.jsx(x,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(b,{type:"button",variant:"outline",onClick:r,children:"Hủy"}),e.jsx(b,{type:"submit",children:"Lưu thay đổi"})]})]})})},ae=({profile:s})=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-y-6",children:[e.jsx(p,{icon:e.jsx(L,{className:"mt-0.5 h-5 w-5 text-gray-400"}),label:"Họ và tên",value:s.fullName}),e.jsx(p,{icon:e.jsx(K,{className:"mt-0.5 h-5 w-5 text-gray-400"}),label:"Email",value:s.email}),e.jsx(p,{icon:e.jsx(J,{className:"mt-0.5 h-5 w-5 text-gray-400"}),label:"Số điện thoại",value:s.phoneNumber}),e.jsx(p,{icon:e.jsx(O,{className:"mt-0.5 h-5 w-5 text-gray-400"}),label:"Ngày sinh",value:s.dateOfBirth}),e.jsx(p,{icon:e.jsx(R,{className:"mt-0.5 h-5 w-5 text-gray-400"}),label:"Địa chỉ",value:s.address}),s.bio&&e.jsx(p,{icon:e.jsx(D,{className:"mt-0.5 h-5 w-5 text-gray-400"}),label:"Giới thiệu",value:s.bio})]})}),p=({icon:s,label:i,value:r})=>e.jsxs("div",{className:"flex items-start gap-2",children:[s,e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:i}),e.jsx("p",{children:r})]})]}),fe=({profile:s,canRead:i=!0,canUpdate:r=!0})=>{const[c,a]=T.useState(!1),u=()=>{f("Cập nhật thành công",{description:"Thông tin cá nhân của bạn đã được cập nhật."}),a(!1)};return i?e.jsxs(w,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Thông tin cá nhân"}),e.jsx(F,{children:"Quản lý thông tin cá nhân của bạn"})]}),!c&&r&&e.jsxs(b,{onClick:()=>a(!0),variant:"outline",size:"sm",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Chỉnh sửa"]})]}),e.jsx(S,{children:c?e.jsx(te,{profile:s,onSubmitSuccess:u,onCancel:()=>a(!1)}):e.jsx(ae,{profile:s})})]}):e.jsx("div",{className:"text-red-500",children:"Bạn không có quyền truy cập vào thông tin này"})},ce=l.object({bloodType:l.string().regex(/^(A|B|AB|O)[+-]$/,{message:"Nhóm máu phải có định dạng hợp lệ (A+, B-, AB+, O-,...)"}).optional(),height:l.number().min(0,{message:"Chiều cao phải là số dương"}).max(300,{message:"Chiều cao không được vượt quá 300cm"}).optional(),weight:l.number().min(0,{message:"Cân nặng phải là số dương"}).max(500,{message:"Cân nặng không được vượt quá 500kg"}).optional(),allergies:l.string().max(1e3,{message:"Thông tin dị ứng không được vượt quá 1000 ký tự"}).optional(),chronicDiseases:l.string().max(1e3,{message:"Thông tin bệnh mãn tính không được vượt quá 1000 ký tự"}).optional(),notes:l.string().max(2e3,{message:"Ghi chú không được vượt quá 2000 ký tự"}).optional(),healthInsuranceNumber:l.string().min(10,{message:"Số BHYT phải có ít nhất 10 ký tự"}).max(15,{message:"Số BHYT không được vượt quá 15 ký tự"})}),re=({profile:s,onSubmitSuccess:i,onCancel:r})=>{const c={bloodType:s.bloodType||"",height:s.height||0,weight:s.weight||0,allergies:s.allergies||"Không có",chronicDiseases:s.chronicDiseases||"Không có",notes:s.notes||"Không có",healthInsuranceNumber:s.healthInsuranceNumber||""},a=_(),u=$({mutation:{onError:n=>{var j,H;f.error(((H=(j=n.response)==null?void 0:j.data)==null?void 0:H.message)||n.message)},onSuccess:()=>{i(),a.invalidateQueries({queryKey:E()})}}}),t=I({resolver:P(ce),defaultValues:c}),z=n=>{var j;console.log("Submitted data:",n),u.mutateAsync({id:(j=s.id)==null?void 0:j.toString(),data:{bloodType:n.bloodType,height:n.height,weight:n.weight,allergies:n.allergies,chronicDiseases:n.chronicDiseases,notes:n.notes,healthInsuranceNumber:n.healthInsuranceNumber}})};return e.jsx(A,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(z),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(h,{control:t.control,name:"bloodType",render:({field:n})=>e.jsxs(o,{children:[e.jsx(d,{children:"Nhóm máu"}),e.jsx(m,{children:e.jsx(g,{placeholder:"Ví dụ: A+, B-, O+, AB-",...n})}),e.jsx(x,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(h,{control:t.control,name:"height",render:({field:n})=>e.jsxs(o,{children:[e.jsx(d,{children:"Chiều cao (cm)"}),e.jsx(m,{children:e.jsx(g,{type:"number",placeholder:"Chiều cao",...n,onChange:j=>n.onChange(parseFloat(j.target.value))})}),e.jsx(x,{})]})}),e.jsx(h,{control:t.control,name:"weight",render:({field:n})=>e.jsxs(o,{children:[e.jsx(d,{children:"Cân nặng (kg)"}),e.jsx(m,{children:e.jsx(g,{type:"number",placeholder:"Cân nặng",...n,onChange:j=>n.onChange(parseFloat(j.target.value))})}),e.jsx(x,{})]})})]}),e.jsx(h,{control:t.control,name:"healthInsuranceNumber",render:({field:n})=>e.jsxs(o,{className:"md:col-span-2",children:[e.jsx(d,{children:"Số BHYT"}),e.jsx(m,{children:e.jsx(y,{placeholder:"Số BHYT",className:"resize-none",...n})}),e.jsx(x,{})]})}),e.jsx(h,{control:t.control,name:"allergies",render:({field:n})=>e.jsxs(o,{className:"md:col-span-2",children:[e.jsx(d,{children:"Dị ứng"}),e.jsx(m,{children:e.jsx(y,{placeholder:"Liệt kê các dị ứng của bạn",className:"resize-none",...n})}),e.jsx(x,{})]})}),e.jsx(h,{control:t.control,name:"chronicDiseases",render:({field:n})=>e.jsxs(o,{className:"md:col-span-2",children:[e.jsx(d,{children:"Bệnh mãn tính"}),e.jsx(m,{children:e.jsx(y,{placeholder:"Liệt kê các bệnh mãn tính của bạn",className:"resize-none",...n})}),e.jsx(x,{})]})}),e.jsx(h,{control:t.control,name:"notes",render:({field:n})=>e.jsxs(o,{className:"md:col-span-2",children:[e.jsx(d,{children:"Ghi chú"}),e.jsx(m,{children:e.jsx(y,{placeholder:"Thông tin bổ sung về sức khỏe của bạn",className:"resize-none",...n})}),e.jsx(x,{})]})})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(b,{type:"button",variant:"outline",onClick:r,children:"Hủy"}),e.jsx(b,{type:"submit",children:"Lưu thay đổi"})]})]})})},ie=({profile:s})=>{const i=()=>{if(!s.height||!s.weight)return"Chưa có thông tin";const r=s.height/100,c=s.weight/(r*r);return c<18.5?`${c.toFixed(1)} - Thiếu cân`:c<25?`${c.toFixed(1)} - Bình thường`:c<30?`${c.toFixed(1)} - Thừa cân`:`${c.toFixed(1)} - Béo phì`};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(v,{icon:e.jsx(G,{className:"h-5 w-5 text-red-500 mr-2"}),label:"Nhóm máu",value:s.bloodType||"Chưa cập nhật"}),e.jsx(v,{icon:e.jsx(k,{className:"h-5 w-5 text-blue-500 mr-2"}),label:"Chỉ số BMI",value:i()}),e.jsx(v,{icon:e.jsx(X,{className:"h-5 w-5 text-indigo-500 mr-2"}),label:"Chiều cao",value:s.height?`${s.height} cm`:"Chưa cập nhật"}),e.jsx(v,{icon:e.jsx(k,{className:"h-5 w-5 text-green-500 mr-2"}),label:"Cân nặng",value:s.weight?`${s.weight} kg`:"Chưa cập nhật"})]})},v=({icon:s,label:i,value:r})=>e.jsx(w,{className:"bg-gray-50 border-0",children:e.jsx(S,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[s,e.jsx("p",{className:"font-medium",children:i})]}),e.jsx("p",{className:"font-semibold",children:r})]})})}),le=({profile:s})=>e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx(C,{icon:e.jsx(U,{className:"mt-0.5 h-5 w-5 text-green-500"}),title:"Số BHYT",content:s.healthInsuranceNumber||"Chưa cập nhật"}),e.jsx(C,{icon:e.jsx(se,{className:"mt-0.5 h-5 w-5 text-amber-500"}),title:"Dị ứng",content:s.allergies||"Không có thông tin dị ứng"}),e.jsx(C,{icon:e.jsx(k,{className:"mt-0.5 h-5 w-5 text-red-500"}),title:"Bệnh mãn tính",content:s.chronicDiseases||"Không có thông tin bệnh mãn tính"}),s.notes&&e.jsx(C,{icon:e.jsx(D,{className:"mt-0.5 h-5 w-5 text-gray-500"}),title:"Ghi chú",content:s.notes})]}),C=({icon:s,title:i,content:r})=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[s,e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i}),e.jsx("p",{className:"text-sm mt-1",children:r})]})]})}),he=({profile:s})=>(console.log("HealthProfileDisplay",s),e.jsxs("div",{className:"space-y-6",children:[e.jsx(ie,{profile:s}),e.jsx(le,{profile:s})]})),we=({profile:s,canRead:i=!0,canUpdate:r=!0})=>{const[c,a]=T.useState(!1),u=()=>{f("Cập nhật thành công",{description:"Thông tin sức khỏe của bạn đã được cập nhật."}),a(!1)};return i?e.jsxs(w,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{children:[e.jsx(M,{children:"Hồ sơ sức khỏe"}),e.jsx(F,{children:"Quản lý thông tin sức khỏe cá nhân của bạn"})]}),!c&&r&&e.jsxs(b,{onClick:()=>a(!0),variant:"outline",size:"sm",children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Chỉnh sửa"]})]}),e.jsx(S,{children:c?e.jsx(re,{profile:s,onSubmitSuccess:u,onCancel:()=>a(!1)}):e.jsx(he,{profile:s})})]}):e.jsx("div",{className:"text-center text-muted-foreground",children:"Không có quyền truy cập vào thông tin sức khỏe cá nhân này"})};export{we as H,R as M,J as P,fe as a};
