import{k as I,r as h,R as se,l as re,j as e,t as q,m as ne}from"./index-BW1v2Y3o.js";import{T as ie,a as le,b as z}from"./tabs-Bg8Hq9Zq.js";import{C as Q,d as X,a as ce,b as oe,c as me}from"./card-Bb8dNGOw.js";import{A as de,a as ue,b as fe}from"./avatar-CiTwwk9L.js";import{B as M}from"./index-lZj-UG3P.js";import{I as he}from"./input-B9pFp4AM.js";import{D as xe,a as pe,b as je,c as ge,d as be,e as ve,f as Ne}from"./dialog-CtifNpLo.js";import{P as ye}from"./pencil-CU8hVN-1.js";import{M as Ce}from"./mail-8B1aJbxS.js";import{P as Te,a as Se,H as ke}from"./index-Bg0JSjC5.js";import{C as Ae}from"./calendar-DSwk2Pit.js";import{c as Ie}from"./createLucideIcon-BIXz2lW7.js";import"./index-BvPlwEJa.js";import"./index-CqIhzmhs.js";import"./index-DcUGr25C.js";import"./index-BYx5ngvf.js";import"./file-D5Y2yJfI.js";import"./clsx-B-dksMZM.js";import"./index-fdDP8kav.js";import"./label-C5VtnZRZ.js";import"./index-B3p3PcZP.js";import"./form-CBmUezT4.js";import"./textarea-DMIEle1g.js";import"./user-BXjafA9g.js";import"./heart-BoFhaPJl.js";/**
 * @license lucide-react v0.481.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ue=Ie("Shield",De);var B,G;function Oe(){if(G)return B;G=1;var a="Expected a function",i=NaN,r="[object Symbol]",m=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,x=/^0o[0-7]+$/i,D=parseInt,U=typeof I=="object"&&I&&I.Object===Object&&I,O=typeof self=="object"&&self&&self.Object===Object&&self,L=U||O||Function("return this")(),E=Object.prototype,c=E.toString,b=Math.max,S=Math.min,v=function(){return L.Date.now()};function J(t,n,o){var p,N,k,j,l,f,y=0,H=!1,C=!1,R=!0;if(typeof t!="function")throw new TypeError(a);n=_(n)||0,P(o)&&(H=!!o.leading,C="maxWait"in o,k=C?b(_(o.maxWait)||0,n):k,R="trailing"in o?!!o.trailing:R);function w(s){var d=p,T=N;return p=N=void 0,y=s,j=t.apply(T,d),j}function Z(s){return y=s,l=setTimeout(A,n),H?w(s):j}function ee(s){var d=s-f,T=s-y,$=n-d;return C?S($,k-T):$}function V(s){var d=s-f,T=s-y;return f===void 0||d>=n||d<0||C&&T>=k}function A(){var s=v();if(V(s))return W(s);l=setTimeout(A,ee(s))}function W(s){return l=void 0,R&&p?w(s):(p=N=void 0,j)}function te(){l!==void 0&&clearTimeout(l),y=0,p=f=N=l=void 0}function ae(){return l===void 0?j:W(v())}function F(){var s=v(),d=V(s);if(p=arguments,N=this,f=s,d){if(l===void 0)return Z(f);if(C)return l=setTimeout(A,n),w(f)}return l===void 0&&(l=setTimeout(A,n)),j}return F.cancel=te,F.flush=ae,F}function P(t){var n=typeof t;return!!t&&(n=="object"||n=="function")}function K(t){return!!t&&typeof t=="object"}function Y(t){return typeof t=="symbol"||K(t)&&c.call(t)==r}function _(t){if(typeof t=="number")return t;if(Y(t))return i;if(P(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=P(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=t.replace(m,"");var o=u.test(t);return o||x.test(t)?D(t.slice(2),o?2:8):g.test(t)?i:+t}return B=J,B}Oe();function Le(a=!1){if(typeof a!="boolean")throw new Error("defaultValue must be `true` or `false`");const[i,r]=h.useState(a),m=h.useCallback(()=>{r(!0)},[]),g=h.useCallback(()=>{r(!1)},[]),u=h.useCallback(()=>{r(x=>!x)},[]);return{value:i,setValue:r,setTrue:m,setFalse:g,toggle:u}}const Ee=({profile:a})=>{const[i,r]=h.useState(()=>a.avatarUrl),{toggle:m,setValue:g,value:u}=Le(!1);se.useEffect(()=>{u||r(a.avatarUrl)},[a.avatarUrl,u]);const[x,D]=h.useState(null),{mutate:U,isPending:O}=re({mutation:{onError:c=>{q.error("Cập nhật ảnh đại diện thất bại",{description:c.message}),r(a.avatarUrl||null),m()},onSuccess:c=>{q.success("Cập nhật ảnh đại diện thành công",{description:"Ảnh đại diện của bạn đã được cập nhật."}),r(c.avatarUrl||null),m()}}}),L=c=>{var S;const b=(S=c.target.files)==null?void 0:S[0];if(D(b||null),b){const v=URL.createObjectURL(b);r(v)}},E=()=>{x&&U({data:{file:x}})};return e.jsxs(e.Fragment,{children:[e.jsxs(de,{className:"h-24 w-24",children:[e.jsx(ue,{src:i,alt:a.fullName}),e.jsx(fe,{className:"text-lg",children:(a.fullName||"?").split(" ").map(c=>c[0]).join("").slice(0,2).toUpperCase()})]}),e.jsxs(xe,{open:u,onOpenChange:g,children:[e.jsx(pe,{asChild:!0,children:e.jsx(M,{size:"icon",variant:"outline",className:"absolute -bottom-2 -right-2 h-8 w-8 rounded-full",children:e.jsx(ye,{className:"h-4 w-4"})})}),e.jsxs(je,{children:[e.jsxs(ge,{children:[e.jsx(be,{children:"Thay đổi ảnh đại diện"}),e.jsx(ve,{children:"Chọn một ảnh mới từ thiết bị của bạn."})]}),e.jsx(he,{type:"file",accept:"image/*",onChange:L,className:"mt-4"}),e.jsx(Ne,{className:"mt-4",children:e.jsx(M,{type:"submit",disabled:O,onClick:E,children:"Lưu thay đổi"})})]})]})]})},Pe=({profile:a})=>e.jsx(Q,{className:"md:col-span-1",children:e.jsx(X,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[e.jsx("div",{className:"relative",children:e.jsx(Ee,{profile:a})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:a.fullName}),e.jsx("p",{className:"text-gray-500",children:"ID: USR123456"})]}),e.jsx("div",{className:"w-full pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ce,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm",children:a.email})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm",children:a.phoneNumber})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm",children:a.dateOfBirth})]})]})})]})})}),Re=()=>e.jsxs(Q,{className:"mt-6",children:[e.jsxs(ce,{children:[e.jsx(oe,{className:"text-lg",children:"Bảo mật"}),e.jsx(me,{children:"Quản lý mật khẩu và các thiết lập bảo mật"})]}),e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ue,{className:"mt-0.5 h-5 w-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Thay đổi mật khẩu"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Cập nhật mật khẩu định kỳ để bảo vệ tài khoản của bạn"})]})]}),e.jsx(M,{variant:"outline",children:"Thay đổi"})]})})]}),we=({profile:a})=>e.jsxs(e.Fragment,{children:[e.jsx(Se,{profile:a}),e.jsx(Re,{})]}),Fe=({user:a,profile:i})=>{const[r,m]=h.useState("personal");return e.jsx("div",{className:"flex-1 container py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center md:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Hồ sơ của tôi"}),e.jsx(ie,{defaultValue:"personal",value:r,onValueChange:m,className:"mt-4 md:mt-0",children:e.jsxs(le,{children:[e.jsx(z,{value:"personal",children:"Thông tin cá nhân"}),e.jsx(z,{value:"health",children:"Hồ sơ sức khỏe"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(Pe,{profile:i}),e.jsxs("div",{className:"md:col-span-3",children:[r==="personal"&&e.jsx(we,{profile:i}),r==="health"&&e.jsx(ke,{profile:i})]})]})]})})},ot=function(){const{profile:i}=ne({from:"/_layout/home/user-profile"});return e.jsx(Fe,{user:i,profile:i.profile})};export{ot as component};
